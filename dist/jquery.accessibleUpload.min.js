!function(e){var s=function(s,i){this.accessibleUpload=e(s),this.defaults={labels:{selectedFileCount:"files selected"}},this.classes=e.extend(!0,this.defaults.classes,window.project?window.project.classes:{}),this.labels=e.extend(!0,this.defaults.labels,window.project?window.project.labels:{}),this.config=e.extend(!0,this.defaults,i||{}),this.init()};e.extend(s.prototype,{init:function(s){var i=this._createFilenameHolder(this);e(i).insertAfter(this.accessibleUpload),this.accessibleUpload.next(".lbo-aif").on("click","button",{input:this},e.proxy(this._fileRemove,this)),this.accessibleUpload.on("change.lbo-aif","",{holder:i},e.proxy(this._change,this)),this.accessibleUpload.change(e.proxy(function(){this.accessibleUpload.trigger("change.aif")},this))},destroy:function(){this.accessibleUpload.next(".aif").remove(),this.accessibleUpload.unbind(".aif")},_createFilenameHolder:function(e){return'<span class="lbo-aif" style="display: none;"><span class="lbo-aif-filename" aria-live="polite"></span></span>'},_change:function(s){var i="";this.title&&(i='<span class="visuallyhidden">'+this.title+"</span>");var t=this._getFilename(e(s.currentTarget));this.accessibleUpload.hide(),0===this.accessibleUpload.next(".lbo-aif").find("button").length&&this.accessibleUpload.next(".lbo-aif").append('<button class="btn-supprimer"><span class="visuallyhidden">Supprimer '+t+".</span></button>"),this.accessibleUpload.next(".lbo-aif").show().find(".lbo-aif-filename").html(i+" "+t).attr("tabindex",0).focus()},_getFilename:function(e){return e.prop("files").length>1?e.prop("files").length+" "+this.labels.selectedFileCount:(filename=e.val().split("\\"),filename.pop())},_fileRemove:function(s){s.preventDefault(),this.accessibleUpload.next(".lbo-aif").remove(),this._resetFormElement(s.data.input.accessibleUpload);var i=e(s.data.input.accessibleUpload).clone();return e(s.data.input.accessibleUpload).replaceWith(i),i.show().focus().accessibleUpload(),!1},_resetFormElement:function(e){e.wrap("<form>").closest("form").get(0).reset(),e.unwrap()}}),e.fn.accessibleUpload=function(i){return this.each(function(){var t=e(this);if(!t.data("accessibleUpload")){var a=new s(this,i);t.data("accessibleUpload",a)}})}}(jQuery);